<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Speed up MySQL database operations on Ubuntu by using the RAM Disk | Emmanuel Corrales
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://emcorrales.com/assets/css/poole.css">
  <link rel="stylesheet" href="https://emcorrales.com/assets/css/syntax.css">
  <link rel="stylesheet" href="https://emcorrales.com/assets/css/hyde.css">
  <link rel="stylesheet" href="https://emcorrales.com/assets/css/cheatsheet.css">
  <link rel="stylesheet" href="https://emcorrales.com/assets/css/sidebar.css">
  
    <link rel="stylesheet" href="https://emcorrales.com/assets/css/posts.css">
  
  <link rel="stylesheet" href="https://emcorrales.com/vendor/font-awesome/5.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://emcorrales.com/assets/images/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://emcorrales.com/assets/images/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://emcorrales.com/assets/images/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://emcorrales.com/assets/images/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://emcorrales.com/assets/images/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://emcorrales.com/assets/images/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://emcorrales.com/assets/images/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://emcorrales.com/assets/images/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://emcorrales.com/assets/images/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="https://emcorrales.com/assets/images/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://emcorrales.com/assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://emcorrales.com/assets/images/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://emcorrales.com/assets/images/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://emcorrales.com/assets/images/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://emcorrales.com/feed.xml">

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-80537045-1', 'auto');
    ga('send', 'pageview');
  </script>
  

  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Speed up MySQL database operations on Ubuntu by using the RAM Disk | Emmanuel Corrales</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Speed up MySQL database operations on Ubuntu by using the RAM Disk" />
<meta name="author" content="Emmanuel Corrales" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve been working on a project that requires a MySQL database. Everytime I pull changes from the repository, I have to run the migrations and seed the database. The seeders contain thousands of rows of data and it takes almost an hour to finish. A colleague of mine noticed this and taught me a nice trick to speed up the database operations and that is to use the RAM disk which I’ll be sharing in this post." />
<meta property="og:description" content="I’ve been working on a project that requires a MySQL database. Everytime I pull changes from the repository, I have to run the migrations and seed the database. The seeders contain thousands of rows of data and it takes almost an hour to finish. A colleague of mine noticed this and taught me a nice trick to speed up the database operations and that is to use the RAM disk which I’ll be sharing in this post." />
<link rel="canonical" href="https://emcorrales.com/blog/speed-up-mysql-databse-operations-using-the-ramdisk-on-ubuntu" />
<meta property="og:url" content="https://emcorrales.com/blog/speed-up-mysql-databse-operations-using-the-ramdisk-on-ubuntu" />
<meta property="og:site_name" content="Emmanuel Corrales" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-03T08:30:33+00:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Speed up MySQL database operations on Ubuntu by using the RAM Disk","dateModified":"2018-07-03T08:30:33+00:00","datePublished":"2018-07-03T08:30:33+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://emcorrales.com/blog/speed-up-mysql-databse-operations-using-the-ramdisk-on-ubuntu"},"author":{"@type":"Person","name":"Emmanuel Corrales"},"description":"I’ve been working on a project that requires a MySQL database. Everytime I pull changes from the repository, I have to run the migrations and seed the database. The seeders contain thousands of rows of data and it takes almost an hour to finish. A colleague of mine noticed this and taught me a nice trick to speed up the database operations and that is to use the RAM disk which I’ll be sharing in this post.","url":"https://emcorrales.com/blog/speed-up-mysql-databse-operations-using-the-ramdisk-on-ubuntu","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="https://www.gravatar.com/avatar/6b917878b9fccb87c8b1489813b755e2?s=500" alt="Emmanuel Corrales" />
      <h1>
        <a href="https://emcorrales.com">
          Emmanuel Corrales
        </a>
      </h1>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="https://emcorrales.com">Blog</a>

      

      
      
        
      
        
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cheatsheets">Cheat Sheets</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about">About</a>
          
        
      
    </nav>

    <div class="social-icons">
      <a href="https://twitter.com/em_corrales"
        class="social fab fa-twitter" title="Twitter" target="_blank"></a>

      <a href="https://linkedin.com/in/emmanuelcorrales"
        class="social fab fa-linkedin" title="Linkedin" target="_blank"></a>

      <a href="https://github.com/emcorrales"
        class="social fab fa-github" title="Github" target="_blank"></a>

      <a href="mailto:contact@emcorrales.com" class="social fa fa-envelope"
        title="Email"></a>

      <a href="/feed.xml" class="social fa fa-rss" title="RSS feed"
        target="_blank"></a>
    </div>

    <p>&copy; 2020. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Speed up MySQL database operations on Ubuntu by using the RAM Disk</h1>
  <span class="post-date">03 Jul 2018</span>
  <br/>
  <p>I’ve been working on a project that requires a MySQL database. Everytime I pull
changes from the repository, I have to run the migrations and seed the database.
The seeders contain thousands of rows of data and it takes almost an hour to
finish. A colleague of mine noticed this and taught me a nice trick to speed up
the database operations and that is to use the RAM disk which I’ll be sharing in
this post.</p>

<h2 id="why-use-the-ram">Why use the RAM?</h2>
<p>RAM(Random Access Memory) is much faster to read from and write to than the
other kinds of storage in a computer, such as the hard disk/ssd where MySQL
stores the database by default. Moving the database to the RAM can dramatically
increase the input and output speed of database operations.</p>

<h2 id="drawbacks">Drawbacks!</h2>

<p>RAM is a volatile memory which means it requires power to retain the data it
stores. This means that the data stored on the RAM will perish once the computer
is turned off. In my case, I use the database only for testing and development
on my local machine. If I ever need to retain the data for testing, I’ll just
backup the database then restore it the next time I need it.</p>

<h2 id="moving-the-databases-to-the-ram">Moving the databases to the RAM.</h2>

<p>Now that you know the advantages and disadvantages of moving the MySQL databases
on the RAM disk, I’ll be walking you through the steps on how to achieve this.</p>

<p>First backup all the databases. We’ll copy it to <strong>/var/lib/mysql.bak</strong>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo cp</span> <span class="nt">-pRL</span> /var/lib/mysql /var/lib/mysql.bak</code></pre></figure>

<p>Create a directory for the RAM disk.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo mkdir</span> /tmp/ramdisk</code></pre></figure>

<p>Mount it. I assigned a size of 2GB for the ramdisk. Its up to you how much space
you want, just make sure it can accommodate all the data you will write to the
database.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>mount <span class="nt">-t</span> tmpfs <span class="nt">-o</span> <span class="nv">size</span><span class="o">=</span>2G tmpfs /tmp/ramdisk/</code></pre></figure>

<p>Move the MySQL databases to the RAM disk.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo mv</span> /var/lib/mysql /tmp/ramdisk/mysql</code></pre></figure>

<p>Create a symlink to the RAM disk.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo ln</span> <span class="nt">-s</span> /tmp/ramdisk/mysql /var/lib/mysql</code></pre></figure>

<p>Change the ownenrship to MySQL to allow access.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo chown </span>mysql:mysql /tmp/ramdisk/mysql</code></pre></figure>

<p>Restart MySQL to apply the changes.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo</span> /etc/init.d/mysql restart</code></pre></figure>

<p>Now we’re finished! After moving the databases to the RAM disk, running the
migrations and seeders took only a minute to finish compared to almost an hour
when using the hard disk.</p>

<h2 id="restoring-the-databases">Restoring the databases.</h2>

<p>Since the databases are saved at the RAM disk, they will be gone everytime the
computer is turned off. Here are the steps to restore it.</p>

<p>Delete previously created symlink to mysql ramdisk.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/lib/mysql</code></pre></figure>

<p>Copy and restore the databases from the backup.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo cp</span> <span class="nt">-pRL</span> /var/lib/mysql.bak /var/lib/mysql</code></pre></figure>

<h2 id="scripts-for-convenience">Scripts for convenience.</h2>

<p>Running all the commands above every time I turn on my computer is a very
tedious task so I created scripts for restoring and moving the databases to
the RAM for my convenience.</p>

<p>Here is the script for restoring the database.</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/69a43f75f45a8024d4b3986dcdb941ec.js?file=mysql-ramdisk-restore.sh"> </script>

<p>Here is the script for moving the database to the RAM.</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/69a43f75f45a8024d4b3986dcdb941ec.js?file=mysql-ramdisk.sh"> </script>

<p>This is what I execute everytime I turn on my computer.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Restore the data first.</span>
./mysql-ramdisk-restore.sh
<span class="c"># then move it to the RAM.</span>
./mysql-ramdisk.sh</code></pre></figure>

<p>Just make sure that you have backed up your databases to <strong>/var/lib/mysql.bak</strong>
before executing these commands.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/how-to-remove-git-submodules">
            How to remove Git submodules
            <small>11 Oct 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/how-to-use-a-self-signed-certificate-with-gradle">
            How to use a self signed certificate with Gradle
            <small>29 Jul 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/how-to-enable-internet-access-on-centos7-virtualbox">
            How to enable internet access of CentOS 7 on VirtualBox
            <small>13 Jun 2019</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


  <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://emmanuel-corrales.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



    </div>

  </body>
</html>
